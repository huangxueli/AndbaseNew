<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.8"/>
<title>AndBase开发框架: com.google.gson.InstanceCreator&lt; T &gt;接口 参考</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="ic_launcher.png"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">AndBase开发框架
   &#160;<span id="projectnumber">1.5.8r3</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- 制作者 Doxygen 1.8.8 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'搜索');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>首页</span></a></li>
      <li><a href="pages.html"><span>相关页面</span></a></li>
      <li><a href="namespaces.html"><span>命名空间</span></a></li>
      <li class="current"><a href="annotated.html"><span>类</span></a></li>
      <li><a href="files.html"><span>文件</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="搜索" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>类列表</span></a></li>
      <li><a href="classes.html"><span>类索引</span></a></li>
      <li><a href="hierarchy.html"><span>类继承关系</span></a></li>
      <li><a href="functions.html"><span>类成员</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>全部</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>类</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>命名空间</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>文件</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>函数</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>变量</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>枚举值</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>页</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespacecom.html">com</a></li><li class="navelem"><a class="el" href="namespacecom_1_1google.html">google</a></li><li class="navelem"><a class="el" href="namespacecom_1_1google_1_1gson.html">gson</a></li><li class="navelem"><a class="el" href="interfacecom_1_1google_1_1gson_1_1_instance_creator_3_01_t_01_4.html">InstanceCreator< T ></a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public 成员函数</a> &#124;
<a href="interfacecom_1_1google_1_1gson_1_1_instance_creator_3_01_t_01_4-members.html">所有成员列表</a>  </div>
  <div class="headertitle">
<div class="title">com.google.gson.InstanceCreator&lt; T &gt;接口 参考</div>  </div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public 成员函数</h2></td></tr>
<tr class="memitem:a8c399d98bd23675fbd8ee4f4a28a8b9c"><td class="memItemLeft" align="right" valign="top">T&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="interfacecom_1_1google_1_1gson_1_1_instance_creator_3_01_t_01_4.html#a8c399d98bd23675fbd8ee4f4a28a8b9c">createInstance</a> (Type type)</td></tr>
<tr class="separator:a8c399d98bd23675fbd8ee4f4a28a8b9c"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">详细描述</h2>
<div class="textblock"><p>This interface is implemented to create instances of a class that does not define a no-args constructor. If you can modify the class, you should instead add a private, or public no-args constructor. However, that is not possible for library classes, such as JDK classes, or a third-party library that you do not have source-code of. In such cases, you should define an instance creator for the class. Implementations of this interface should be registered with <a class="el" href="">GsonBuilder#registerTypeAdapter(Type, Object)</a> method before <a class="el" href="classcom_1_1google_1_1gson_1_1_gson.html">Gson</a> will be able to use them. </p>
<p>Let us look at an example where defining an InstanceCreator might be useful. The </p><div class="fragment"><div class="line">Id </div>
</div><!-- fragment --><p> class defined below does not have a default no-args constructor.</p>
<pre>
public class Id&lt;T&gt; {
  private final Class&lt;T&gt; clazz;
  private final long value;
  public Id(Class&lt;T&gt; clazz, long value) {
    this.clazz = clazz;
    this.value = value;
  }
}
</pre><p>If <a class="el" href="classcom_1_1google_1_1gson_1_1_gson.html">Gson</a> encounters an object of type</p><div class="fragment"><div class="line">Id </div>
</div><!-- fragment --><p> during deserialization, it will throw an exception. The easiest way to solve this problem will be to add a (public or private) no-args constructor as follows:</p>
<pre>
private Id() {
  this(Object.class, 0L);
}
</pre><p>However, let us assume that the developer does not have access to the source-code of the </p><div class="fragment"><div class="line">Id </div>
</div><!-- fragment --><p> class, or does not want to define a no-args constructor for it. The developer can solve this problem by defining an</p><div class="fragment"><div class="line">InstanceCreator </div>
</div><!-- fragment --><p> for</p><div class="fragment"><div class="line">Id </div>
</div><!-- fragment --><p> :</p>
<pre>
class IdInstanceCreator implements InstanceCreator&lt;Id&gt; {
  public Id <a class="el" href="interfacecom_1_1google_1_1gson_1_1_instance_creator_3_01_t_01_4.html#a8c399d98bd23675fbd8ee4f4a28a8b9c">createInstance(Type type)</a> {
    return new Id(Object.class, 0L);
  }
}
</pre><p>Note that it does not matter what the fields of the created instance contain since <a class="el" href="classcom_1_1google_1_1gson_1_1_gson.html">Gson</a> will overwrite them with the deserialized values specified in Json. You should also ensure that a <em>new</em> object is returned, not a common object since its fields will be overwritten. The developer will need to register</p><div class="fragment"><div class="line">IdInstanceCreator </div>
</div><!-- fragment --><p> with <a class="el" href="classcom_1_1google_1_1gson_1_1_gson.html">Gson</a> as follows:</p>
<pre>
<a class="el" href="classcom_1_1google_1_1gson_1_1_gson.html">Gson</a> gson = new GsonBuilder().registerTypeAdapter(Id.class, new IdInstanceCreator()).create();
</pre><dl class="params"><dt>参数</dt><dd>
  <table class="params">
    <tr><td class="paramname">&lt;T&gt;</td><td>the type of object that will be created by this implementation.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section author"><dt>作者</dt><dd>Inderjeet Singh </dd>
<dd>
Joel Leitch </dd></dl>
</div><h2 class="groupheader">成员函数说明</h2>
<a class="anchor" id="a8c399d98bd23675fbd8ee4f4a28a8b9c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">T com.google.gson.InstanceCreator&lt; T &gt;.createInstance </td>
          <td>(</td>
          <td class="paramtype">Type&#160;</td>
          <td class="paramname"><em>type</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p><a class="el" href="classcom_1_1google_1_1gson_1_1_gson.html">Gson</a> invokes this call-back method during deserialization to create an instance of the specified type. The fields of the returned instance are overwritten with the data present in the Json. Since the prior contents of the object are destroyed and overwritten, do not return an instance that is useful elsewhere. In particular, do not return a common instance, always use</p><div class="fragment"><div class="line"><span class="keyword">new</span> </div>
</div><!-- fragment --><p> to create a new instance.</p>
<dl class="params"><dt>参数</dt><dd>
  <table class="params">
    <tr><td class="paramname">type</td><td>the parameterized T represented as a <a class="el" href="">Type</a>. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>返回</dt><dd>a default object instance of type T. </dd></dl>

</div>
</div>
<hr/>该接口的文档由以下文件生成:<ul>
<li>src/com/google/gson/<a class="el" href="_instance_creator_8java.html">InstanceCreator.java</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
生成于 2014年 十月 28日 星期二 17:26:47 , 为 AndBase开发框架使用  &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.8
</small></address>
</body>
</html>
